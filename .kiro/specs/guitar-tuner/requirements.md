# 要件書

## 概要

PCやスマートフォンのマイクを使用してギターの音を読み取り、リアルタイムでチューニング状態を表示するWebアプリケーション。ユーザーが簡単にギターをチューニングできるよう、視覚的なフィードバックを提供する。

## 要件

### 要件 1

**ユーザーストーリー:** ギタリストとして、マイクを使ってギターの音を読み取り、正確な音程を確認したい。そうすることで、手軽にチューニングができる。

#### 受け入れ基準

1. WHEN ユーザーがWebアプリにアクセス THEN システムはマイクへのアクセス許可を求める
2. WHEN マイクアクセスが許可される THEN システムは音声入力の受信を開始する
3. WHEN ギターの弦が弾かれる THEN システムは音の周波数を検出し分析する
4. WHEN 音が検出される THEN システムは検出された音程を画面に表示する

### 要件 2

**ユーザーストーリー:** ギタリストとして、標準的なギターチューニング（E-A-D-G-B-E）に対して現在の音程がどの程度ずれているかを知りたい。そうすることで、正確にチューニングできる。

#### 受け入れ基準

1. WHEN 音が検出される THEN システムは最も近い標準音程（E2, A2, D3, G3, B3, E4）を特定する
2. WHEN 標準音程が特定される THEN システムは現在の音程と標準音程の差をセント単位で計算する
3. WHEN 音程差が計算される THEN システムは音程が高い/低い/正確かを視覚的に表示する
4. IF 音程差が±5セント以内 THEN システムは「正確」として緑色で表示する

### 要件 3

**ユーザーストーリー:** ギタリストとして、チューニング状態を直感的に理解したい。そうすることで、素早く調整できる。

#### 受け入れ基準

1. WHEN 音程が検出される THEN システムは針式メーターまたはバー表示でずれの方向と程度を表示する
2. WHEN 音程が低い THEN システムは左側または下側に偏った表示をする
3. WHEN 音程が高い THEN システムは右側または上側に偏った表示をする
4. WHEN 音程が正確 THEN システムは中央に針またはバーを表示し、色を緑に変更する

### 要件 4

**ユーザーストーリー:** ギタリストとして、PCでもスマートフォンでも同じように使いたい。そうすることで、どのデバイスでもチューニングできる。

#### 受け入れ基準

1. WHEN PCのブラウザでアクセス THEN システムは適切なレイアウトで表示される
2. WHEN スマートフォンのブラウザでアクセス THEN システムはタッチ操作に適したレスポンシブレイアウトで表示される
3. WHEN 画面サイズが変更される THEN システムは自動的にレイアウトを調整する
4. WHEN 縦向き・横向きが変更される THEN システムは適切に表示を調整する

### 要件 5

**ユーザーストーリー:** ギタリストとして、ノイズの多い環境でも正確に音程を検出したい。そうすることで、様々な場所でチューニングできる。

#### 受け入れ基準

1. WHEN 背景ノイズがある THEN システムはギターの音域（82Hz-330Hz）にフィルタリングを適用する
2. WHEN 複数の音が同時に入力される THEN システムは最も強い信号の音程を検出する
3. WHEN 音量が小さい THEN システムは「音が小さすぎます」というメッセージを表示する
4. WHEN 音が検出されない THEN システムは待機状態を表示する